{% extends "base.html" %}

{% block title %}Reset Password - Healthcare Management System{% endblock %}

{% block content %}
<div class="container">
    <!-- Breadcrumb -->
    <div style="margin-bottom: 1.5rem; color: #64748b; font-size: 0.9rem;">
        <a href="{{ url_for('admin_panel') }}" style="color: #2563eb;">‚Üê Back to Admin Panel</a>
    </div>

    <!-- Page Header -->
    <div class="page-header mb-3">
        <h1 class="page-title">Reset User Password</h1>
        <p class="page-subtitle">Administrator password reset tool</p>
    </div>

    <!-- Warning Box -->
    <div class="card mb-3" style="border-left: 4px solid var(--warning);">
        <div class="card-body">
            <div style="display: flex; align-items: start; gap: 1rem;">
                <div style="font-size: 2rem;">‚ö†Ô∏è</div>
                <div>
                    <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-dark);">Admin Access Only</h4>
                    <p style="color: var(--text-medium); margin: 0;">
                        This page allows you to reset passwords for any user account. Use this power responsibly and only when necessary.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Form -->
    <div class="card" style="max-width: 600px;">
        <form method="POST" action="{{ url_for('reset_password') }}">
            {{ form.hidden_tag() }}
            
            <div class="card-body">
                <div class="form-group">
                    {{ form.email.label }}
                    {{ form.email(placeholder="user@example.com", autocomplete="off") }}
                    {% if form.email.errors %}
                        {% for error in form.email.errors %}
                            <div style="color: var(--danger); font-size: 0.875rem; margin-top: 0.25rem;">{{ error }}</div>
                        {% endfor %}
                    {% endif %}
                    <div style="font-size: 0.875rem; color: var(--text-medium); margin-top: 0.25rem;">
                        Enter the email address of the user whose password you want to reset
                    </div>
                </div>

                <div class="form-group">
                    {{ form.new_password.label }}
                    {{ form.new_password(placeholder="Minimum 8 characters", autocomplete="new-password") }}
                    {% if form.new_password.errors %}
                        {% for error in form.new_password.errors %}
                            <div style="color: var(--danger); font-size: 0.875rem; margin-top: 0.25rem;">{{ error }}</div>
                        {% endfor %}
                    {% endif %}
                    <div style="font-size: 0.875rem; color: var(--text-medium); margin-top: 0.25rem;">
                        The new password for this user account
                    </div>
                </div>

                <div class="form-group">
                    {{ form.confirm_password.label }}
                    {{ form.confirm_password(placeholder="Confirm the new password", autocomplete="new-password") }}
                    {% if form.confirm_password.errors %}
                        {% for error in form.confirm_password.errors %}
                            <div style="color: var(--danger); font-size: 0.875rem; margin-top: 0.25rem;">{{ error }}</div>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Best Practices -->
                <div style="background: var(--very-light-blue); padding: 1rem; border-radius: 0.5rem; border-left: 4px solid var(--info); margin-top: 1.5rem;">
                    <div style="font-weight: 600; color: var(--info); margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span>üí°</span> Password Reset Best Practices
                    </div>
                    <ul style="margin: 0; padding-left: 1.25rem; color: var(--text-medium); font-size: 0.875rem;">
                        <li>Inform the user that their password has been reset</li>
                        <li>Provide the temporary password through a secure channel</li>
                        <li>Advise the user to change the password immediately</li>
                        <li>Document the password reset for security records</li>
                    </ul>
                </div>
            </div>

            <div class="card-header" style="background: var(--background-alt); border-top: 1px solid var(--border); border-bottom: none;">
                <div class="btn-group" style="justify-content: flex-end; width: 100%;">
                    <a href="{{ url_for('admin_panel') }}" class="btn btn-secondary">Cancel</a>
                    {{ form.submit(class="btn btn-primary") }}
                </div>
            </div>
        </form>
    </div>

    <!-- Alternative Method -->
    <div class="card mt-3" style="border-left: 4px solid var(--text-light);">
        <div class="card-body">
            <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-dark);">Alternative: Command Line Tool</h4>
            <p style="color: var(--text-medium); margin-bottom: 0.75rem;">
                You can also reset passwords using the backend script:
            </p>
            <code style="display: block; background: var(--background-alt); padding: 0.75rem; border-radius: 0.375rem; font-family: monospace; font-size: 0.875rem; color: var(--text-dark);">
                python reset_password.py user@example.com newpassword123
            </code>
        </div>
    </div>
</div>
{% endblock %}
