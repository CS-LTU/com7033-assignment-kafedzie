{% extends "base.html" %}

{% block title %}New Patient - Healthcare Management System{% endblock %}

{% block content %}
<div class="container">
    <!-- Breadcrumb -->
    <div style="margin-bottom: 1.5rem; color: #64748b; font-size: 0.9rem;">
        <a href="{{ url_for('list_patients') }}" style="color: #2563eb;">← Back to Patients</a>
    </div>

    <!-- Page Header -->
    <div class="page-header mb-3">
        <h1 class="page-title">New Patient Record</h1>
        <p class="page-subtitle">Add a new patient to the system</p>
    </div>

    <!-- Form -->
    <div class="card" style="max-width: 800px;">
        <form method="POST" action="{{ url_for('create_patient') }}">
            <div class="card-body">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                    
                    <!-- Demographics Section -->
                    <div style="grid-column: 1 / -1;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; color: var(--text-dark); margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary-blue);">
                            Demographics
                        </h3>
                    </div>

                    <div class="form-group">
                        <label for="gender">Gender *</label>
                        <select name="gender" id="gender" required>
                            <option value="">Select gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="age">Age *</label>
                        <input type="number" name="age" id="age" placeholder="Enter age" required min="0" max="150">
                    </div>

                    <div class="form-group">
                        <label for="ever_married">Marital Status *</label>
                        <select name="ever_married" id="ever_married" required>
                            <option value="">Select status</option>
                            <option value="Yes">Married</option>
                            <option value="No">Single</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="work_type">Work Type *</label>
                        <select name="work_type" id="work_type" required>
                            <option value="">Select work type</option>
                            <option value="Private">Private</option>
                            <option value="Self-employed">Self-employed</option>
                            <option value="Govt_job">Government Job</option>
                            <option value="children">Children</option>
                            <option value="Never_worked">Never Worked</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="Residence_type">Residence Type *</label>
                        <select name="Residence_type" id="Residence_type" required>
                            <option value="">Select type</option>
                            <option value="Urban">Urban</option>
                            <option value="Rural">Rural</option>
                        </select>
                    </div>

                    <!-- Medical History Section -->
                    <div style="grid-column: 1 / -1; margin-top: 1rem;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; color: var(--text-dark); margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary-blue);">
                            Medical History
                        </h3>
                    </div>

                    <div class="form-group">
                        <label for="hypertension">Hypertension *</label>
                        <select name="hypertension" id="hypertension" required>
                            <option value="">Select</option>
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="heart_disease">Heart Disease *</label>
                        <select name="heart_disease" id="heart_disease" required>
                            <option value="">Select</option>
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="smoking_status">Smoking Status *</label>
                        <select name="smoking_status" id="smoking_status" required>
                            <option value="">Select status</option>
                            <option value="never smoked">Never Smoked</option>
                            <option value="formerly smoked">Formerly Smoked</option>
                            <option value="smokes">Smokes</option>
                            <option value="Unknown">Unknown</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="stroke">Stroke History *</label>
                        <select name="stroke" id="stroke" required>
                            <option value="">Select</option>
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                    </div>

                    <!-- Health Metrics Section -->
                    <div style="grid-column: 1 / -1; margin-top: 1rem;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; color: var(--text-dark); margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary-blue);">
                            Health Metrics
                        </h3>
                    </div>

                    <div class="form-group">
                        <label for="bmi">Body Mass Index (BMI) *</label>
                        <input type="number" name="bmi" id="bmi" placeholder="e.g., 24.5" required step="0.1" min="10" max="100">
                        <div style="font-size: 0.875rem; color: var(--text-medium); margin-top: 0.25rem;">
                            Normal range: 18.5 - 24.9
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="avg_glucose_level">Average Glucose Level (mg/dL) *</label>
                        <input type="number" name="avg_glucose_level" id="avg_glucose_level" placeholder="e.g., 95.0" required step="0.1" min="0" max="500">
                        <div style="font-size: 0.875rem; color: var(--text-medium); margin-top: 0.25rem;">
                            Normal range: 70 - 100 mg/dL
                        </div>
                    </div>

                    <!-- Info Box -->
                    <div style="grid-column: 1 / -1; margin-top: 1rem;">
                        <div style="background: var(--very-light-blue); padding: 1rem; border-radius: 0.5rem; border-left: 4px solid var(--primary-blue);">
                            <div style="font-weight: 600; color: var(--primary-blue); margin-bottom: 0.5rem;">ℹ️ Note</div>
                            <div style="font-size: 0.875rem; color: var(--text-medium);">
                                All fields marked with * are required. Please ensure all information is accurate before submitting.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-header" style="background: var(--background-alt); border-top: 1px solid var(--border); border-bottom: none;">
                <div class="btn-group" style="justify-content: flex-end; width: 100%;">
                    <a href="{{ url_for('list_patients') }}" class="btn btn-secondary">Cancel</a>
                    <button type="submit" class="btn btn-primary">Create Patient</button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}
